C51 COMPILER V9.60.7.0   BSP_SEG                                                           10/23/2025 11:00:22 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE BSP_SEG
OBJECT MODULE PLACED IN bsp_seg.obj
COMPILER INVOKED BY: D:\ARM\Keil_v5\C51\BIN\C51.EXE source\bsp_seg.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(.\source) DEB
                    -UG OBJECTEXTEND PRINT(.\bsp_seg.lst) TABS(2) OBJECT(bsp_seg.obj)

line level    source

   1          #include "bsp_seg.h"
   2          
   3          void delay_10us(unsigned int ten_us)
   4          {
   5   1        while(ten_us--);  
   6   1      }
   7          
   8          
   9          void Seg_Tran(unsigned char *seg_string, unsigned char *seg_buf)
  10          {
  11   1        
  12   1        unsigned char i = 0;//buf[i],i=0~7
  13   1        unsigned char j = 0;//seg_string[j],j = 0~10
  14   1        unsigned char temp;//字符串转换为段码的中间存储变量
  15   1        
  16   1        for(i=0;i<=7;i++,j++)
  17   1        {
  18   2          switch(seg_string[j])
  19   2          {
  20   3            case '0':temp = 0x3f;break;
  21   3            case '1':temp = 0x06;break;
  22   3            case '2':temp = 0x5b;break;
  23   3            case '3':temp = 0x4f;break;
  24   3            case '4':temp = 0x66;break;
  25   3            case '5':temp = 0x6d;break;
  26   3            case '6':temp = 0x7d;break;
  27   3            case '7':temp = 0x07;break;
  28   3            case '8':temp = 0x7f;break;
  29   3            case '9':temp = 0x6f;break;
  30   3            
  31   3            case 'A':temp = 0x77;break;
  32   3            case 'B':temp = 0x7c;break;
  33   3            case 'C':temp = 0x39;break;
  34   3            case 'D':temp = 0x5e;break;
  35   3            case 'E':temp = 0x79;break;
  36   3            case 'F':temp = 0x71;break;
  37   3            
  38   3      
  39   3            case '-':temp = 0x40;break;
  40   3            case ' ':temp = 0x00;break;
  41   3            
  42   3            default:temp = 0xff;break;
  43   3          }
  44   2          if(seg_string[j+1] == '.')
  45   2          {
  46   3            temp &= 0x80;
  47   3            j++;//跳过带“.”的位置
  48   3          }
  49   2          seg_buf[i] = temp;
  50   2          
  51   2        }
  52   1        
  53   1      }
  54          
C51 COMPILER V9.60.7.0   BSP_SEG                                                           10/23/2025 11:00:22 PAGE 2   

  55          void Seg_Disp(unsigned char *seg_buf)
  56          {
  57   1        unsigned char i = 0;
  58   1        for(i=0;i<8;i++)
  59   1        {
  60   2        switch(i)//位选
  61   2          {
  62   3            case 0: LSC=1;LSB=1;LSA=1;break;
  63   3            case 1: LSC=1;LSB=1;LSA=0;break;
  64   3            case 2: LSC=1;LSB=0;LSA=1;break;
  65   3            case 3: LSC=1;LSB=0;LSA=0;break;
  66   3            case 4: LSC=0;LSB=1;LSA=1;break;
  67   3            case 5: LSC=0;LSB=1;LSA=0;break;
  68   3            case 6: LSC=0;LSB=0;LSA=1;break;
  69   3            case 7: LSC=0;LSB=0;LSA=0;break;
  70   3          }
  71   2          P0 = seg_buf[i];
  72   2          delay_10us(100);
  73   2          P0 = 0x00;
  74   2        }
  75   1      }
  76          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    519    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----      13
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
